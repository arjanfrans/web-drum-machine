(this["webpackJsonpweb-drum-machine"]=this["webpackJsonpweb-drum-machine"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports={container:"VerticalTrackControl_container__11Y4f",tabs:"VerticalTrackControl_tabs__2YEAw",tabButton:"VerticalTrackControl_tabButton__1Zeez",activeTab:"VerticalTrackControl_activeTab__3j1-U",tab:"VerticalTrackControl_tab__2A7ix",name:"VerticalTrackControl_name__jAvo_"}},function(e,t,n){e.exports={horizontalSlider:"RangeSlider_horizontalSlider__39k_y",verticalContainer:"RangeSlider_verticalContainer__2XpP0",verticalSlider:"RangeSlider_verticalSlider__1J7LI",slider:"RangeSlider_slider__1vR_8"}},function(e,t,n){e.exports={container:"TransportControlView_container__2EgBe",item:"TransportControlView_item__3CaJI"}},,function(e,t,n){e.exports={container:"BusTrackView_container__31JTK",meter:"BusTrackView_meter__2S2U-",name:"BusTrackView_name__1XK6V",volume:"BusTrackView_volume__3iKTR",toggleContainer:"BusTrackView_toggleContainer__2gEdo"}},function(e,t,n){e.exports={container:"PanningSlider_container__11W5C",labels:"PanningSlider_labels__17XCa",bold:"PanningSlider_bold__32uS3"}},,function(e,t,n){e.exports={container:"VerticalVolumeSlider_container__2fXna",label:"VerticalVolumeSlider_label__2ch9A",colorRed:"VerticalVolumeSlider_colorRed__3IAad"}},function(e,t,n){e.exports={container:"SendControl_container__1FZOB",enableButton:"SendControl_enableButton__29reU",sendLabel:"SendControl_sendLabel__1LiUW",volumeSlider:"SendControl_volumeSlider__3HUfA"}},function(e,t,n){e.exports={container:"VolumeSlider_container__2Ql4D",label:"VolumeSlider_label__2jkQY",labelVertical:"VolumeSlider_labelVertical__3XXkK",colorRed:"VolumeSlider_colorRed__1x-BT"}},,,function(e,t,n){e.exports={activeCell:"SequencerCell_activeCell__3fDoB",inactiveCell:"SequencerCell_inactiveCell__rHREt",currentNote:"SequencerCell_currentNote__2kFmD"}},function(e,t,n){e.exports={meter:"ControlTab_meter__ntcOl",volume:"ControlTab_volume__2MgnM",toggleContainer:"ControlTab_toggleContainer__1Ys4b"}},function(e,t,n){e.exports={container:"PatternTrackView_container__2lUZE",cells:"PatternTrackView_cells__qrnui"}},,,,,function(e,t,n){e.exports={container:"inputs_container__1term"}},function(e,t,n){e.exports={container:"TrackLabel_container__14nkA"}},function(e,t,n){e.exports={container:"SequencerView_container__1f-Ll"}},function(e,t,n){e.exports={container:"Mixer_container__7-8kN"}},function(e,t,n){e.exports={container:"ToggleButton_container__2vqXn"}},function(e,t,n){e.exports=n(56)},,,,,,function(e,t,n){},,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),r=n(2),s=n(3),o=n(6),c=n.n(o),l=n(9),u=function(){};console.log=u,console.debug=u;var h=console.log,d=n(8),v=n.n(d),m=n(33),p=n.n(m),f=(n(47),n(10)),b=n(11),k=n(13),g=function e(t){Object(a.a)(this,e),this.transportPosition=t};g.Name="TransportPositionUpdatedEvent";var y=n(34),O=function(){function e(){Object(a.a)(this,e),this.emitter=new y.EventEmitter}return Object(i.a)(e,[{key:"on",value:function(e,t){return this.emitter.on(e.Name,t),this}},{key:"emit",value:function(e){console.debug(e),this.emitter.emit(e.constructor.Name,e)}},{key:"off",value:function(e,t){return this.emitter.off(e.Name,t),this}}]),e}(),w=function e(){Object(a.a)(this,e)};w.Name="StopTransportEvent";var j=function e(){Object(a.a)(this,e)};j.Name="StartTransportEvent";var S=function e(){Object(a.a)(this,e)};S.Name="PauseTransportEvent";var E=function e(t){Object(a.a)(this,e),this.bpm=t};E.Name="UpdateBpmTransportEvent";var C,_=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).transport=e,i.on(w,(function(){e.stop()})),i.on(j,(function(){e.start()})),i.on(S,(function(){e.pause()})),i.on(E,(function(t){e.bpm=t.bpm})),i}return n}(O);!function(e){e.Started="started",e.Stopped="stopped",e.Paused="paused"}(C||(C={}));var x=function e(t){Object(a.a)(this,e),this.status=t};x.Name="TransportStatusUpdatedEvent";var N=function(){function e(){Object(a.a)(this,e),this.emitter=void 0,this.transportPosition=0,this.transportStatus=C.Stopped,this.emitter=new _(this),k.m.loopStart=0,k.m.loop=!0}return Object(i.a)(e,[{key:"stop",value:function(){this.transportStatus=C.Stopped,this.emitter.emit(new g(0)),this.emitter.emit(new x(C.Stopped)),k.m.stop()}},{key:"start",value:function(){this.transportStatus=C.Started,this.emitter.emit(new x(C.Started)),k.m.start()}},{key:"pause",value:function(){this.transportStatus=C.Paused,this.emitter.emit(new x(C.Stopped)),k.m.pause()}},{key:"sequenceUpdate",value:function(e,t){this.transportPosition=t}},{key:"shouldUpdate",value:function(e,t){return this.transportStatus===C.Started}},{key:"sequenceDraw",value:function(e,t){this.transportStatus===C.Started&&this.emitter.emit(new g(t))}},{key:"steps",set:function(e){var t=e/8;k.m.loopEnd="".concat(t,"m")}},{key:"bpm",get:function(){return Math.round(k.m.bpm.value)},set:function(e){k.m.bpm.value=e}}]),e}(),T=n(7),V=function(){function e(t,n){Object(a.a)(this,e),this.inputNode=t,this.outputNode=n,this.connections=new Map,this.effects=new Map,this.connections.set("_input",{name:"_input",node:t,output:"_output",enabled:!0}),this.connections.set("_output",{name:"_output",node:n,input:"_input",enabled:!0})}return Object(i.a)(e,[{key:"isEnabled",value:function(e){var t=this.connections.get(e);return!!t&&t.enabled}},{key:"add",value:function(e,t,n){var a={name:e,node:t,input:n,enabled:!0},i=this.findNextInputConnection(a),r=this.findNextOutputConnection(i);i.node.disconnect(r.node),i.node.connect(t),t.connect(r.node),this.connections.set(i.name,Object(T.a)(Object(T.a)({},i),{},{output:a.name})),this.connections.set(r.name,Object(T.a)(Object(T.a)({},r),{},{input:a.name}));var s=Object(T.a)(Object(T.a)({},a),{},{input:i.name,output:r.name});this.connections.set(e,s),this.effects.set(e,s)}},{key:"disableEffect",value:function(e){var t=this.connections.get(e);if(!t)throw new Error("No connection found.");if(t.enabled){var n=this.findNextInputConnection(t),a=this.findNextOutputConnection(t);t.node.disconnect(a.node),n.node.disconnect(t.node),n.node.connect(a.node),this.connections.set(e,Object(T.a)(Object(T.a)({},t),{},{enabled:!1})),this.effects.set(e,Object(T.a)(Object(T.a)({},t),{},{enabled:!1}))}}},{key:"enableEffect",value:function(e){var t=this.connections.get(e);if(!t)throw new Error("No connection found.");if(!t.enabled){var n=this.findNextInputConnection(t),a=this.findNextOutputConnection(t);n.node.disconnect(a.node),n.node.connect(t.node),t.node.connect(a.node),this.connections.set(e,Object(T.a)(Object(T.a)({},t),{},{enabled:!0})),this.effects.set(e,Object(T.a)(Object(T.a)({},t),{},{enabled:!0}))}}},{key:"findNextInputConnection",value:function(e){var t=this.connections.get(e.input||"_input");if(!t)throw new Error("No input connection found.");return t.enabled?t:this.findNextInputConnection(t)}},{key:"findNextOutputConnection",value:function(e){var t=this.connections.get(e.output||"_output");if(!t)throw new Error("No output connection found.");return t.enabled?t:this.findNextOutputConnection(t)}}]),e}(),B=function e(t){Object(a.a)(this,e),this.volume=t};B.Name="UpdateChannelVolumeEvent";var q=function e(t){Object(a.a)(this,e),this.pan=t};q.Name="UpdateChannelPanningEvent";var P=function e(t){Object(a.a)(this,e),this.solo=t};P.Name="SoloChannelEvent";var A=function e(t){Object(a.a)(this,e),this.mute=t};A.Name="MuteChannelEvent";var R=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).bus=e,i.on(B,(function(t){e.channel.volume.value=t.volume})),i.on(q,(function(t){e.channel.pan.value=t.pan})),i.on(P,(function(t){e.channel.solo=t.solo})),i.on(A,(function(t){e.channel.mute=t.mute})),i}return n}(O),M=function e(t,n){Object(a.a)(this,e),this.leftVolume=t,this.rightVolume=n};M.Name="TrackOutputVolumeUpdatedEvent";var D=function e(){Object(a.a)(this,e)};D.meterSmoothing=.3,D.offlineBufferLength=4,D.drawInterval=.1;var I=function(){function e(t,n){Object(a.a)(this,e),this.id=t,this.name=n,this.channel=void 0,this.meter=void 0,this.effectsRack=void 0,this.emitter=void 0,this.emitter=new R(this),this.channel=new k.c(0,0),this.channel.receive(t),this.channel.toDestination(),this.meter=new k.i({channels:2,smoothing:D.meterSmoothing}),this.channel.connect(this.meter),this.effectsRack=new V(this.channel,this.channel.context.destination)}return Object(i.a)(e,[{key:"draw",value:function(){var e=this.meter.getValue();Array.isArray(e)?this.emitter.emit(new M(e[0],e[1])):this.emitter.emit(new M(e,e))}}]),e}(),U=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"createReverbBus",value:function(){var e=new I("reverb","Reverb"),t=new k.k({wet:1,preDelay:.01});return e.effectsRack.add("reverb",t),e}},{key:"createChorusBus",value:function(){var e=new I("chorus","Chorus"),t=new k.d({frequency:4,delayTime:2.5,depth:.5,wet:1});return e.effectsRack.add("chorus",t),e}},{key:"createDelayBus",value:function(){var e=new I("delay","Delay"),t=new k.g("4n",.05);return e.effectsRack.add("delay",t),e}}]),e}(),L=function e(t,n){Object(a.a)(this,e),this.bus=t,this.volume=n};L.Name="UpdateSendVolumeEvent";var z=function e(t,n){Object(a.a)(this,e),this.effect=t,this.enable=n};z.Name="EnableTrackEffectEvent";var W=function e(t){Object(a.a)(this,e),this.bus=t};W.Name="EnableSendEvent";var F=function e(t){Object(a.a)(this,e),this.bus=t};F.Name="DisableSendEvent";var H=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).track=e,i.on(B,(function(t){e.channel.volume.value=t.volume})),i.on(q,(function(t){e.channel.pan.value=t.pan})),i.on(P,(function(t){e.solo=t.solo})),i.on(A,(function(t){e.mute=t.mute})),i.on(z,(function(t){t.enable?e.effectsRack.enableEffect(t.effect):e.effectsRack.disableEffect(t.effect)})),i.on(L,(function(t){e.getSend(t.bus).volume=t.volume})),i.on(W,(function(t){e.getSend(t.bus).enable()})),i.on(F,(function(t){e.getSend(t.bus).disable()})),i}return n}(O),X=function(){function e(t,n){Object(a.a)(this,e),this.fromChannel=t,this.toBus=n,this.channel=void 0,this.enabled=!1,this.channel=new k.c({context:t.context})}return Object(i.a)(e,[{key:"isEnabled",value:function(){return this.enabled}},{key:"enable",value:function(){this.enabled=!0,this.fromChannel.connect(this.channel),this.channel.connect(this.toBus.channel)}},{key:"disable",value:function(){this.enabled=!1,this.fromChannel.disconnect(this.channel),this.channel.disconnect(this.toBus.channel)}},{key:"volume",set:function(e){e=Math.round(e),this.channel.volume.value=e},get:function(){return this.channel.volume.value}}]),e}(),Y=function(){function e(t,n,i,r){Object(a.a)(this,e),this.id=t,this.name=n,this.sample=i,this.buses=r,this.player=void 0,this.emitter=void 0,this.channel=void 0,this.meter=void 0,this.effectsRack=void 0,this.sends=new Map,this.emitter=new H(this),this.player=new k.j(i),this.channel=new k.c(-6,0),this.effectsRack=new V(this.player,this.channel),this.meter=new k.i({channels:2,smoothing:D.meterSmoothing}),this.player.connect(this.channel),this.channel.toDestination(),this.channel.connect(this.meter)}return Object(i.a)(e,[{key:"addSend",value:function(e){var t=this.buses.get(e);if(!t)throw new Error("Bus ".concat(e," not found."));var n=new X(this.channel,t);return this.sends.set(e,n),n}},{key:"getSend",value:function(e){var t=this.sends.get(e);if(!t)throw new Error("Send ".concat(e," is not added to this track."));return t}},{key:"sequenceUpdate",value:function(e,t){this.player.start(e)}},{key:"shouldUpdate",value:function(e,t){return t.getCurrentPattern().isCellActive(this.id,e)}},{key:"draw",value:function(){var e=this.meter.getValue();Array.isArray(e)?this.emitter.emit(new M(e[0],e[1])):this.emitter.emit(new M(e,e))}},{key:"mute",set:function(e){this.channel.mute=e}},{key:"solo",set:function(e){this.channel.solo=e;var t,n=Object(f.a)(this.sends.values());try{for(n.s();!(t=n.n()).done;){t.value.channel.solo=e}}catch(a){n.e(a)}finally{n.f()}}}]),e}(),K=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"createTrack",value:function(e,t,n,a){var i=new Y(e,t,n,a),r=new k.a(50,6,-30),s=new k.k({wet:.5,preDelay:.01}),o=new k.d({depth:.4,spread:.4,feedback:.4,wet:.7}),c=new k.b({bits:4}),l=new k.e({distortion:.8});return i.addSend("reverb"),i.addSend("chorus"),i.addSend("delay"),i.effectsRack.add("autoWah",r),i.effectsRack.add("distortion",l),i.effectsRack.add("bitCrusher",c),i.effectsRack.add("chorus",o),i.effectsRack.add("reverb",s,"chorus"),i.effectsRack.disableEffect("autoWah"),i.effectsRack.disableEffect("distortion"),i.effectsRack.disableEffect("bitCrusher"),i.effectsRack.disableEffect("chorus"),i.effectsRack.disableEffect("reverb"),i}}]),e}(),J=function e(t,n){Object(a.a)(this,e),this.leftVolume=t,this.rightVolume=n};J.Name="MasterOutputVolumeUpdatedEvent";var G=function(){function e(){Object(a.a)(this,e),this.meter=new k.i({channels:2,smoothing:D.meterSmoothing}),this.emitter=new O,this.previousValues=[0,0],this.channel.connect(this.meter)}return Object(i.a)(e,[{key:"shouldDraw",value:function(){var e=this.meter.getValue();return Array.isArray(e)?(e[0]!==Number.NEGATIVE_INFINITY||e[1]!==Number.NEGATIVE_INFINITY)&&(e[0]!==this.previousValues[0]||e[1]!==this.previousValues[1]):e!==Number.NEGATIVE_INFINITY&&e!==this.previousValues[0]}},{key:"draw",value:function(){var e=this.meter.getValue();this.shouldDraw()&&(Array.isArray(e)?(this.emitter.emit(new J(e[0],e[1])),this.previousValues=[e[0],e[1]]):(this.emitter.emit(new J(e,e)),this.previousValues=[e,e]))}},{key:"channel",get:function(){return k.n()}}]),e}(),Z=n(35),Q=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"indexes",value:function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}},{key:"stretch",value:function(e,t){var n=Object(Z.a)(Array,Object(b.a)(new Array(t))),a=0;return n.map((function(){a>e.length-1&&(a=0);var t=e[a];return a++,t}))}}]),e}(),$=n(12),ee=function e(t){Object(a.a)(this,e),this.steps=t};ee.Name="UpdateSequencerStepsEvent";var te=function e(t,n,i,r){Object(a.a)(this,e),this.patternIndex=t,this.track=n,this.cell=i,this.value=r};te.Name="SetPatternCellEvent";var ne=function e(t){Object(a.a)(this,e),this.steps=t};ne.Name="SequencerStepsUpdatedEvent";var ae,ie=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).sequencer=e,i.on(ee,(function(e){i.sequencer.steps=e.steps,i.emit(new ne(i.sequencer.steps))})),i.on(te,(function(e){i.sequencer.setCell(e.patternIndex,e.track,e.cell,e.value)})),i}return n}(O),re=function(){function e(t){Object(a.a)(this,e),this.data=[],this._steps=void 0,this._steps=t,this.clear()}return Object(i.a)(e,[{key:"clear",value:function(){this.data=Q.indexes(this._steps).map((function(){return!1}))}},{key:"setCell",value:function(e,t){this.data[e]=t}},{key:"getSequence",value:function(){return this.data}},{key:"steps",set:function(e){e>this._steps?this.data=Q.stretch(this.data,e):e<this._steps&&(this.data=this.data.slice(0,e)),this._steps=e}}]),e}(),se=function(){function e(t,n){Object(a.a)(this,e),this.tracks=new Map;var i,r=Object(f.a)(n);try{for(r.s();!(i=r.n()).done;){var s=i.value;this.tracks.set(s,new re(t))}}catch(o){r.e(o)}finally{r.f()}}return Object(i.a)(e,[{key:"clear",value:function(){var e,t=Object(f.a)(this.tracks.values());try{for(t.s();!(e=t.n()).done;){e.value.clear()}}catch(n){t.e(n)}finally{t.f()}}},{key:"isCellActive",value:function(e,t){var n=this.tracks.get(e);if(!n)throw new Error('No PatterTrack for "'.concat(e," exists."));return n.getSequence()[t]}},{key:"setCell",value:function(e,t,n){var a=this.tracks.get(e);if(!a)throw new Error('No PatterTrack for "'.concat(e," exists."));a.setCell(t,n)}},{key:"steps",set:function(e){var t,n=Object(f.a)(this.tracks.values());try{for(n.s();!(t=n.n()).done;){t.value.steps=e}}catch(a){n.e(a)}finally{n.f()}}}]),e}(),oe=function(){function e(t){Object(a.a)(this,e),this.emitter=new ie(this),this.patterns=[],this._steps=void 0,this.onChangeSteps=void 0,this._subdivision=void 0,this._steps=t.steps||16,this.onChangeSteps=t.onChangeSteps,this.patterns.push(new se(this._steps,t.tracks)),this._subdivision="".concat(t.subdivision||8,"n")}return Object(i.a)(e,[{key:"loadPreset",value:function(e){this.steps=e.steps,this._subdivision="".concat(e.subdivision,"n"),this.clear();var t,n=this.getCurrentPattern(),a=Object(f.a)(e.tracks);try{for(a.s();!(t=a.n()).done;){var i,r=t.value,s=Object(f.a)(r.data.entries());try{for(s.s();!(i=s.n()).done;){var o=Object($.a)(i.value,2),c=o[0],l=o[1];n.setCell(r.id,c,l)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){a.e(u)}finally{a.f()}}},{key:"clear",value:function(){this.getCurrentPattern().clear()}},{key:"setOnChangeSteps",value:function(e){this.onChangeSteps=e}},{key:"getCurrentPattern",value:function(){return this.patterns[0]}},{key:"getPattern",value:function(e){var t=this.patterns[e];if(!t)throw new Error('Pattern with index "'.concat(e,'" not found.'));return t}},{key:"setCell",value:function(e,t,n,a){this.getPattern(e).setCell(t,n,a)}},{key:"subdivision",get:function(){return this._subdivision}},{key:"steps",get:function(){return this._steps},set:function(e){this._steps=e;var t,n=Object(f.a)(this.patterns);try{for(n.s();!(t=n.n()).done;){t.value.steps=e}}catch(a){n.e(a)}finally{n.f()}this.onChangeSteps&&this.onChangeSteps(e)}}]),e}(),ce=function(){function e(t){Object(a.a)(this,e),this.config=t,this.masterTrack=new G,this.tracks=new Map,this.buses=new Map,this.transport=void 0,this.sequencer=void 0,this.drawSequenceLoop=void 0,this.sequenceLoop=void 0,this.transport=new N;var n=t.sequencerPreset;this.sequencer=new oe({steps:n.steps,subdivision:n.subdivision,tracks:t.trackData.map((function(e){return e.id}))}),this.sequencer.loadPreset(n)}return Object(i.a)(e,[{key:"getDraws",value:function(){return[this.masterTrack].concat(Object(b.a)(this.tracks.values()),Object(b.a)(this.buses.values()))}},{key:"getSequenceUpdates",value:function(){return[this.transport].concat(Object(b.a)(this.tracks.values()))}},{key:"getSequenceDraws",value:function(){return[this.transport]}},{key:"init",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.createBuses(),this.createTracks(),e.next=4,k.p();case 4:return e.next=6,k.o();case 6:this.transport.steps=this.sequencer.steps,this.startSequenceLoop(),this.startSequenceDrawLoop(),this.startDrawLoop(),this.sequencer.setOnChangeSteps((function(e){var n,a,i=!1;t.transport.transportStatus===C.Started?(t.transport.stop(),i=!0):t.transport.transportStatus===C.Paused&&t.transport.stop(),null===(n=t.sequenceLoop)||void 0===n||n.dispose(),null===(a=t.drawSequenceLoop)||void 0===a||a.dispose(),t.transport.steps=t.sequencer.steps,t.startSequenceDrawLoop(),t.startSequenceLoop(),i&&t.transport.start()}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createBuses",value:function(){this.buses.set("chorus",U.createChorusBus()),this.buses.set("reverb",U.createReverbBus()),this.buses.set("delay",U.createDelayBus())}},{key:"createTracks",value:function(){var e,t=Object(f.a)(this.config.trackData);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=K.createTrack(n.id,n.name,n.sample,this.buses);this.tracks.set(n.id,a)}}catch(i){t.e(i)}finally{t.f()}}},{key:"startDrawLoop",value:function(){var e=this;new k.h((function(t){k.f.schedule((function(){var n,a=Object(f.a)(e.getDraws());try{for(a.s();!(n=a.n()).done;){n.value.draw(t)}}catch(i){a.e(i)}finally{a.f()}}),t)}),D.drawInterval).start()}},{key:"startSequenceDrawLoop",value:function(){var e=this;this.drawSequenceLoop=new k.l((function(t,n){k.f.schedule((function(){var a,i=Object(f.a)(e.getSequenceDraws());try{for(i.s();!(a=i.n()).done;){a.value.sequenceDraw(t,n)}}catch(r){i.e(r)}finally{i.f()}}),t)}),Q.indexes(this.sequencer.steps),this.sequencer.subdivision).start()}},{key:"startSequenceLoop",value:function(){var e=this;this.sequenceLoop=new k.l((function(t,n){var a,i=Object(f.a)(e.getSequenceUpdates());try{for(i.s();!(a=i.n()).done;){var r=a.value;r.shouldUpdate(n,e.sequencer)&&r.sequenceUpdate(t,n)}}catch(s){i.e(s)}finally{i.f()}}),Q.indexes(this.sequencer.steps),this.sequencer.subdivision).start()}}]),e}(),le={sequencerPreset:{id:"preset_1",steps:16,subdivision:8,tracks:[{id:"kick",data:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1]},{id:"snare",data:[!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1]},{id:"hihat",data:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]},{id:"shaker",data:[!1,!1,!0,!0,!1,!1,!0,!0,!1,!1,!0,!0,!1,!1,!0,!0]}]},trackData:[{id:"kick",name:"Kick",sample:"assets/kick.wav"},{id:"snare",name:"Snare",sample:"assets/snare.wav"},{id:"hihat",name:"HiHat",sample:"assets/hihat.wav"},{id:"stick1",name:"Stick",sample:"assets/stick1.wav"},{id:"perc1",name:"Perc.",sample:"assets/perc1.wav"},{id:"clap",name:"Clap",sample:"assets/clap.wav"},{id:"snap",name:"Snap",sample:"assets/snap.wav"},{id:"shaker",name:"Shaker",sample:"assets/shaker.wav"}]},ue=n(19),he=n.n(ue),de=function(e){return v.a.createElement("button",e,"Pause")},ve=function(e){return v.a.createElement("button",e,"Play")},me=function(e){return v.a.createElement("button",e,"Stop")},pe=n(36),fe=n.n(pe),be=function(e){return v.a.createElement("div",{className:fe.a.container},"BPM:",v.a.createElement("input",Object.assign({title:"BPM",min:1,max:1600,type:"number"},e)))},ke=n(14),ge=function(e){var t=e.draw,n=Object(ke.a)(e,["draw"]),a=function(e){var t=Object(d.useRef)(null);return Object(d.useEffect)((function(){var n=t.current.getContext("2d");if(null==!n)throw new Error("Could not get context");var a,i=0;return function t(){i++,e(n,i),a=window.requestAnimationFrame(t)}(),function(){a&&window.cancelAnimationFrame(a)}}),[e]),t}(t);return v.a.createElement("canvas",Object.assign({ref:a},n))};!function(e){e.horizontal="horizontal",e.vertical="vertical"}(ae||(ae={}));var ye=function(){function e(t){Object(a.a)(this,e),this.redBoxIndex=void 0,this.yellowBoxIndex=void 0,this.boxHeight=void 0,this.boxWidth=void 0,this.boxSpacingX=void 0,this.boxSpacingY=void 0,this.channelWidth=void 0,this.channelHeight=void 0,this.nextValues=[],this.currentValues=[],this.direction=void 0,this.maxValue=void 0,this.minValue=void 0,this.width=void 0,this.height=void 0,this.boxes=void 0,this.boxSpacing=void 0,this.jitter=0,this.redThreshold=void 0,this.yellowThreshold=void 0,this.channels=void 0,this.maxValue=(null===t||void 0===t?void 0:t.maxValue)||100,this.minValue=(null===t||void 0===t?void 0:t.minValue)||0,this.boxes=(null===t||void 0===t?void 0:t.boxes)||25,this.boxSpacing=(null===t||void 0===t?void 0:t.boxSpacing)||.2,this.jitter=(null===t||void 0===t?void 0:t.jitter)||0,this.redThreshold=(null===t||void 0===t?void 0:t.redThreshold)||0,this.yellowThreshold=(null===t||void 0===t?void 0:t.yellowThreshold)||0,this.channels=(null===t||void 0===t?void 0:t.channels)||1,this.direction=(null===t||void 0===t?void 0:t.direction)||"horizontal";for(var n=[],i=0;i<this.channels;i++)n[i]=this.normalizeValue(this.minValue);if(null===t||void 0===t?void 0:t.values){var r,s=Object(f.a)(t.values.entries());try{for(s.s();!(r=s.n()).done;){var o=Object($.a)(r.value,2),c=o[0],l=o[1];n[c]=this.normalizeValue(l)}}catch(u){s.e(u)}finally{s.f()}}this.currentValues=n,this.width=(null===t||void 0===t?void 0:t.width)||20,this.height=(null===t||void 0===t?void 0:t.height)||100,this.channelWidth=this.width/this.channels,this.channelHeight=this.height,this.boxHeight=this.channelHeight/(this.boxes+(this.boxes+1)*this.boxSpacing),this.boxSpacingY=this.boxHeight*this.boxSpacing,this.boxWidth=this.channelWidth-2*this.boxSpacingY,this.boxSpacingX=(this.channelWidth-this.boxWidth)/2,this.redBoxIndex=Math.ceil(this.normalizeValue(this.redThreshold)*this.boxes),this.yellowBoxIndex=Math.ceil(this.normalizeValue(this.yellowThreshold)*this.boxes)}return Object(i.a)(e,[{key:"isBoxOn",value:function(t,n){return t<=Math.ceil(n/e.MAX*this.boxes)}},{key:"getBoxColor",value:function(t,n){return t>this.redBoxIndex?this.isBoxOn(t,n)?e.colors.redOn:e.colors.redOff:t>this.yellowBoxIndex?this.isBoxOn(t,n)?e.colors.yellowOn:e.colors.yellowOff:this.isBoxOn(t,n)?e.colors.greenOn:e.colors.greenOff}},{key:"applyJitter",value:function(t){if(this.jitter>0&&t>e.MIN){var n=Math.random()*this.jitter*e.MAX;Math.random()>.5&&(n=-n),t+=n}return t}},{key:"drawBox",value:function(e,t,n,a,i){n=Math.abs(n-(this.boxes-1))+1,e.beginPath(),this.direction===ae.horizontal?e.rect(a,i,this.boxHeight,this.boxWidth):e.rect(a,i,this.boxWidth,this.boxHeight),e.fillStyle=this.getBoxColor(n,t),e.fill(),this.direction===ae.horizontal?e.translate(this.boxHeight+this.boxSpacingY,0):e.translate(0,this.boxHeight+this.boxSpacingY)}},{key:"computeValue",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t<=n?t+=(n-t)/5:t-=(t-n)/5,(t=this.applyJitter(t))<e.MIN&&(t=e.MIN),t}},{key:"draw",value:function(e,t){this.direction===ae.vertical?(e.canvas.width=this.width,e.canvas.height=this.height):(e.canvas.width=this.height,e.canvas.height=this.width);for(var n=0;n<this.channels;n++){var a=this.currentValues[n],i=this.nextValues[n];if(void 0===i||a!==i){var r=this.computeValue(a,i);e.save(),e.beginPath(),this.direction===ae.horizontal?e.rect(0,n*this.channelWidth,this.channelHeight,this.channelWidth):e.rect(n*this.channelWidth,0,this.channelWidth,this.channelHeight),e.fillStyle="rgb(32,32,32)",e.fill(),e.restore(),e.save(),e.translate(this.boxSpacingX,this.boxSpacingY);for(var s=0;s<this.boxes;s++)this.direction===ae.horizontal?this.drawBox(e,r,this.boxes-s,0,n*this.channelWidth):this.drawBox(e,r,s,n*this.channelWidth,0);e.restore(),this.currentValues[n]=Math.round(1e3*r)/1e3}}}},{key:"normalizeValue",value:function(e){return(e-this.minValue)/(this.maxValue-this.minValue)}},{key:"values",set:function(e){var t=this;this.nextValues=e.map((function(e){return Math.round(1e3*t.normalizeValue(e))/1e3}))}}]),e}();ye.colors={redOn:"rgba(255,47,30,0.9)",redOff:"rgba(64,12,8,0.9)",yellowOn:"rgba(255,215,5,0.9)",yellowOff:"rgba(64,53,0,0.9)",greenOn:"rgba(53,255,30,0.9)",greenOff:"rgba(13,64,8,0.9)"},ye.MAX=1,ye.MIN=0;var Oe=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).canvas=void 0,i.canvas=new ye({width:e.width,height:e.height,minValue:-48,maxValue:12,redThreshold:0,yellowThreshold:-6,direction:e.direction,channels:2}),i}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e,t,n){return!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.direction,a=t.style,i=t.onUpdate,r=Object(ke.a)(t,["direction","style","onUpdate"]);i((function(t){e.canvas.values=t}));var s={width:"".concat(this.canvas.height,"px"),height:"".concat(this.canvas.width,"px")},o={width:"".concat(this.canvas.width,"px"),height:"".concat(this.canvas.height,"px")},c=Object(T.a)(Object(T.a)({},n===ae.horizontal?s:o),a);return v.a.createElement("div",Object.assign({style:c},r),v.a.createElement(ge,{draw:function(t,n){return e.canvas.draw(t,n)}}))}}]),n}(v.a.Component),we=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).meterListener=function(e){i.props.masterTrack.emitter.on(J,(function(t){e([t.leftVolume,t.rightVolume])}))},i.state={enableStart:!0,enablePause:!1,enableStop:!1,bpm:e.transport.bpm,steps:e.sequencer.steps},i}return Object(i.a)(n,[{key:"handleStartClick",value:function(){this.setState({enableStart:!1,enablePause:!0,enableStop:!0}),this.props.transport.emitter.emit(new j)}},{key:"handleStopClick",value:function(){this.setState({enableStart:!0,enablePause:!1,enableStop:!1}),this.props.transport.emitter.emit(new w)}},{key:"handlePauseClick",value:function(){this.setState({enableStart:!0,enablePause:!1,enableStop:!0}),this.props.transport.emitter.emit(new S)}},{key:"commitBpmChange",value:function(e){var t=Math.max(1,Math.min(Number.parseInt(e.currentTarget.value),400));t!==this.state.bpm&&(this.props.transport.emitter.emit(new E(t)),this.setState({bpm:t}))}},{key:"updateSteps",value:function(e){this.props.sequencer.emitter.emit(new ee(e)),this.setState({steps:e})}},{key:"render",value:function(){var e=this;return v.a.createElement("div",{className:he.a.container},v.a.createElement("div",null,v.a.createElement(ve,{className:he.a.item,disabled:!this.state.enableStart,onClick:function(){return e.handleStartClick()}}),v.a.createElement(de,{className:he.a.item,disabled:!this.state.enablePause,onClick:function(){return e.handlePauseClick()}}),v.a.createElement(me,{className:he.a.item,disabled:!this.state.enableStop,onClick:function(){return e.handleStopClick()}})),v.a.createElement("div",null,v.a.createElement(Oe,{className:he.a.item,direction:"horizontal",width:38,height:200,style:{display:"inline-block"},onUpdate:this.meterListener})),v.a.createElement("div",null,v.a.createElement(be,{className:he.a.item,defaultValue:this.state.bpm,onChange:n.handleBpmChange.bind(this),onBlur:this.commitBpmChange.bind(this),onMouseUp:this.commitBpmChange.bind(this)})),v.a.createElement("div",null,"Steps:",v.a.createElement("select",{value:this.state.steps,onChange:function(t){return e.updateSteps(Number.parseInt(t.currentTarget.value))}},[8,16,32,64].map((function(e){return v.a.createElement("option",{key:e,value:e},e)})))))}}],[{key:"handleBpmChange",value:function(e){var t=Math.max(1,Math.min(Number.parseInt(e.currentTarget.value),400));e.currentTarget.value="".concat(t)}}]),n}(v.a.Component),je=n(29),Se=n.n(je),Ee=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"onToggle",value:function(){this.props.setCell(!this.props.isActive)}},{key:"render",value:function(){return v.a.createElement("div",{onClick:this.onToggle.bind(this),key:this.props.index,className:[this.props.isActive?Se.a.activeCell:Se.a.inactiveCell,this.props.highlight?Se.a.currentNote:""].join(" ")})}}]),n}(v.a.Component),Ce=n(31),_e=n.n(Ce),xe=n(37),Ne=n.n(xe),Te=function(e){var t=e.name;return v.a.createElement("div",{className:Ne.a.container},t)},Ve=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.sequence.map((function(t,n){return v.a.createElement(Ee,{setCell:function(t){return e.props.setCell(n,t)},key:n,isActive:t,index:n,highlight:e.props.highlightIndex===n})}));return v.a.createElement("div",{className:_e.a.container},v.a.createElement(Te,{name:this.props.name}),v.a.createElement("div",{className:_e.a.cells,style:{gridTemplateColumns:"repeat(".concat(t.length,", 1fr)")}},t))}}]),n}(v.a.Component),Be=n(38),qe=n.n(Be),Pe=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={currentPattern:0,transportPosition:0},i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.transport.emitter.on(g,(function(t){e.setState({transportPosition:t.transportPosition})})),this.props.sequencer.emitter.on(ne,(function(t){e.forceUpdate()}))}},{key:"render",value:function(){var e,t=this,n=this.props.sequencer.getPattern(this.state.currentPattern),a=[],i=Object(f.a)(n.tracks.entries());try{var r=function(){var n=Object($.a)(e.value,2),i=n[0],r=n[1];a.push(v.a.createElement(Ve,{key:i,name:i,setCell:function(e,n){t.props.sequencer.emitter.emit(new te(t.state.currentPattern,i,e,n)),t.forceUpdate()},sequence:r.getSequence(),highlightIndex:t.state.transportPosition}))};for(i.s();!(e=i.n()).done;)r()}catch(s){i.e(s)}finally{i.f()}return v.a.createElement("div",{className:qe.a.container},a)}}]),n}(v.a.Component),Ae=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={transportPosition:0},i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.transport.emitter.on(g,(function(t){e.setState({transportPosition:t.transportPosition})}))}},{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement(we,{transport:this.props.transport,masterTrack:this.props.masterTrack,sequencer:this.props.sequencer}),v.a.createElement(Pe,{sequencer:this.props.sequencer,transport:this.props.transport}))}}]),n}(v.a.Component),Re=n(39),Me=n.n(Re),De=n(21),Ie=n.n(De),Ue=n(22),Le=n.n(Ue),ze=n(18),We=n.n(ze),Fe=0,He=function(e){var t=e.min,n=e.max,a=e.step,i=e.datalist,r=e.value,s=e.onChange;Fe+=1;return v.a.createElement(v.a.Fragment,null,v.a.createElement("input",{type:"range",step:a,min:t,max:n,list:"RangeSlider_".concat(Fe),className:"".concat(We.a.horizontalSlider," ").concat(We.a.slider),defaultValue:r,onChange:function(e){var t=Number.parseFloat(e.currentTarget.value);s(t)}}),v.a.createElement("datalist",{id:"RangeSlider_".concat(Fe)},i.map((function(e,t){var n=e.label,a=e.value;return v.a.createElement("option",{key:t,value:a},n)}))))},Xe=function(e){var t=e.value,n=void 0===t?0:t,a=e.onChange;return v.a.createElement("div",{className:Le.a.container},v.a.createElement(He,{min:-1,max:1,step:.01,value:n,onChange:a,datalist:[{label:"L",value:-1},{label:"C",value:0},{label:"R",value:1}]}),v.a.createElement("div",{className:Le.a.labels},v.a.createElement("span",{className:-1===n?Le.a.bold:""},"L"),v.a.createElement("span",{className:0===n?Le.a.bold:""},"C"),v.a.createElement("span",{className:1===n?Le.a.bold:""},"R")))},Ye=n(40),Ke=n.n(Ye),Je=function(e){var t=e.isActive,n=e.onClick,a=e.label,i=e.activeColor,r=Object(ke.a)(e,["isActive","onClick","label","activeColor"]);return v.a.createElement("button",Object.assign({className:Ke.a.container,style:{backgroundColor:t?"":i},onClick:n},r),a)},Ge=n(24),Ze=n.n(Ge),Qe=0,$e=function(e){var t=e.min,n=e.max,a=e.step,i=e.datalist,r=e.value,s=e.onChange;Qe+=1;return v.a.createElement("div",{className:We.a.verticalContainer},v.a.createElement("input",{type:"range",step:a,min:t,max:n,list:"VerticalRangeSlider_".concat(Qe),className:"".concat(We.a.verticalSlider," ").concat(We.a.slider),defaultValue:r,onChange:function(e){var t=Number.parseFloat(e.currentTarget.value);s(t)}}),v.a.createElement("datalist",{id:"VerticalRangeSlider_".concat(Qe)},i.map((function(e,t){var n=e.label,a=e.value;return v.a.createElement("option",{key:t,value:a},n)}))))},et=function(e){var t=e.value,n=e.onChange;return void 0===t&&(t=-32),t=Math.round(t),v.a.createElement("div",{className:Ze.a.container},v.a.createElement($e,{value:t,onChange:n,min:-32,max:6,step:1,datalist:[{label:-32,value:-32},{label:0,value:0},{label:6,value:6}]}),v.a.createElement("div",{className:t<=0?Ze.a.label:"".concat(Ze.a.label," ").concat(Ze.a.colorRed)},t>0?"+".concat(t):"".concat(t),"db"))},tt=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).meterListener=function(e){i.props.bus.emitter.on(M,(function(t){e([t.leftVolume,t.rightVolume])}))},i.state={pan:e.bus.channel.pan.value,volume:e.bus.channel.volume.value,solo:e.bus.channel.solo,mute:e.bus.channel.mute},i}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.bus;return v.a.createElement("div",{className:Ie.a.container},v.a.createElement(Xe,{value:this.state.pan,onChange:function(n){n!==t.channel.pan.value&&(t.emitter.emit(new q(n)),e.setState({pan:n}))}}),v.a.createElement("div",{className:Ie.a.meter},v.a.createElement(Oe,{direction:"vertical",width:20,height:110,style:{display:"inline-block"},onUpdate:this.meterListener})),v.a.createElement("div",{className:Ie.a.volume,title:"Volume"},v.a.createElement(et,{onChange:function(n){n!==t.channel.volume.value&&(t.emitter.emit(new B(n)),e.setState({volume:n}))},value:this.state.volume})),v.a.createElement("div",{className:Ie.a.toggleContainer},v.a.createElement(Je,{onClick:function(){t.emitter.emit(new P(!t.channel.solo)),e.setState({solo:!e.state.solo})},isActive:!this.state.solo,activeColor:"goldenrod",label:"S"}),v.a.createElement(Je,{onClick:function(){t.emitter.emit(new A(!t.channel.mute)),e.setState({mute:!e.state.mute})},isActive:!this.state.mute,activeColor:"darkred",label:"M"})),v.a.createElement("div",{className:Ie.a.name},t.name))}}]),n}(v.a.Component),nt=n(17),at=n.n(nt),it=n(15),rt=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;Object(a.a)(this,n),i=t.call(this,e);var r,s={},o=Object(f.a)(e.track.effectsRack.effects.values());try{for(o.s();!(r=o.n()).done;){var c=r.value;s[c.name]=c.enabled}}catch(l){o.e(l)}finally{o.f()}return i.state={effects:s},i}return Object(i.a)(n,[{key:"enableEffect",value:function(e,t){this.props.track.emitter.emit(new z(e,t)),this.setState({effects:Object(T.a)(Object(T.a)({},this.state.effects),{},Object(it.a)({},e,t))})}},{key:"render",value:function(){for(var e=this,t=[],n=function(){var n=Object($.a)(i[a],2),r=n[0],s=n[1];t.push(v.a.createElement("div",{key:r},v.a.createElement(Je,{onClick:function(){return e.enableEffect(r,!s)},isActive:!s,label:r,activeColor:"white",title:r})))},a=0,i=Object.entries(this.state.effects);a<i.length;a++)n();return v.a.createElement("div",null,t)}}]),n}(v.a.Component),st=n(25),ot=n.n(st),ct=n(26),lt=n.n(ct),ut=function(e){var t=e.value,n=e.onChange;return void 0===t&&(t=-32),t=Math.round(t),v.a.createElement("div",{className:lt.a.container},v.a.createElement(He,{value:t,onChange:n,min:-32,max:6,step:1,datalist:[{label:-32,value:-32},{label:0,value:0},{label:6,value:6}]}),v.a.createElement("div",{className:t<=0?lt.a.label:"".concat(lt.a.label," ").concat(lt.a.colorRed)},t>0?"+".concat(t):"".concat(t),"db"))},ht=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={volume:e.send.volume,enabled:e.send.isEnabled()},i}return Object(i.a)(n,[{key:"updateVolume",value:function(e){this.props.track.emitter.emit(new L(this.props.name,e)),this.setState({volume:e})}},{key:"enableSend",value:function(){this.state.enabled||(this.props.track.emitter.emit(new W(this.props.name)),this.setState({enabled:!0}))}},{key:"disableSend",value:function(){this.state.enabled&&(this.props.track.emitter.emit(new F(this.props.name)),this.setState({enabled:!1}))}},{key:"render",value:function(){var e=this;return v.a.createElement("div",{key:this.props.name,title:"Send: ".concat(this.props.name),className:ot.a.container},v.a.createElement("div",{className:ot.a.sendLabel},this.props.name),v.a.createElement("div",{className:ot.a.enableButton},v.a.createElement(Je,{isActive:!this.state.enabled,onClick:function(){return e.state.enabled?e.disableSend():e.enableSend()},label:this.state.enabled?"On":"Off",activeColor:"lightcoral"})),v.a.createElement("div",{className:ot.a.volumeSlider},v.a.createElement(ut,{onChange:this.updateVolume.bind(this),value:this.state.volume})))}}]),n}(v.a.Component),dt=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e,t=[],n=Object(f.a)(this.props.track.sends.entries());try{for(n.s();!(e=n.n()).done;){var a=Object($.a)(e.value,2),i=a[0],r=a[1];t.push(v.a.createElement(ht,{key:i,name:i,track:this.props.track,send:r}))}}catch(s){n.e(s)}finally{n.f()}return v.a.createElement("div",null,t)}}]),n}(v.a.Component),vt=n(30),mt=n.n(vt),pt=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).updatePanning=function(e){e!==i.props.track.channel.pan.value&&(i.props.track.emitter.emit(new q(e)),i.setState({pan:e}))},i.soloChannel=function(){i.props.track.emitter.emit(new P(!i.props.track.channel.solo)),i.setState({solo:!i.state.solo})},i.muteChannel=function(){i.props.track.emitter.emit(new A(!i.props.track.channel.mute)),i.setState({mute:!i.state.mute})},i.updateVolume=function(e){e!==i.props.track.channel.volume.value&&(i.props.track.emitter.emit(new B(e)),i.setState({volume:e}))},i.meterListener=function(e){i.props.track.emitter.on(M,(function(t){e([t.leftVolume,t.rightVolume])}))},i.state={pan:e.track.channel.pan.value,volume:e.track.channel.volume.value,solo:e.track.channel.solo,mute:e.track.channel.mute},i}return Object(i.a)(n,[{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement(Xe,{value:this.state.pan,onChange:this.updatePanning}),v.a.createElement("div",{className:mt.a.meter},v.a.createElement(Oe,{direction:"vertical",width:20,height:110,style:{display:"inline-block"},onUpdate:this.meterListener})),v.a.createElement("div",{className:mt.a.volume,title:"Volume"},v.a.createElement(et,{onChange:this.updateVolume,value:this.state.volume})),v.a.createElement("div",{className:mt.a.toggleContainer},v.a.createElement(Je,{onClick:this.soloChannel,isActive:!this.state.solo,activeColor:"goldenrod",label:"S"}),v.a.createElement(Je,{onClick:this.muteChannel,isActive:!this.state.mute,activeColor:"darkred",label:"M"})))}}]),n}(v.a.Component),ft=new(function(){function e(){Object(a.a)(this,e),this.shiftDown=!1}return Object(i.a)(e,[{key:"isShiftDown",value:function(){return this.shiftDown}},{key:"onKeyDown",value:function(e){this.shiftDown=e.shiftKey}},{key:"onKeyUp",value:function(e){this.shiftDown=e.shiftKey}}]),e}());window.addEventListener("keyup",(function(e){ft.onKeyUp(e),e.preventDefault()}),!1),window.addEventListener("keydown",(function(e){ft.onKeyDown(e),e.preventDefault()}),!1);var bt=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={activeTab:n.TABS[0]},i}return Object(i.a)(n,[{key:"changeTab",value:function(e){this.setState({activeTab:e})}},{key:"renderTabButton",value:function(e){var t=this;return v.a.createElement("button",{className:"".concat(this.state.activeTab===e?at.a.activeTab:""," ").concat(at.a.tabButton),onClick:function(){ft.isShiftDown()?t.props.updateActiveTab(e):t.changeTab(e)}},e)}},{key:"render",value:function(){var e=this.props.track,t=this.state.activeTab,a=null;return a=t===n.TABS[0]?v.a.createElement("div",{className:at.a.tab},v.a.createElement(pt,{track:e})):t===n.TABS[1]?v.a.createElement("div",{className:at.a.tab},v.a.createElement(rt,{track:e})):v.a.createElement("div",{className:at.a.tab},v.a.createElement(dt,{track:e})),v.a.createElement("div",{className:at.a.container},v.a.createElement("div",{className:at.a.tabs},this.renderTabButton(n.TABS[0]),this.renderTabButton(n.TABS[1]),this.renderTabButton(n.TABS[2])),v.a.createElement("div",null,a),v.a.createElement("div",{className:at.a.name},e.name))}}]),n}(v.a.Component);bt.TABS=["CTL","EFX","SND"];var kt=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).updateActiveTab=function(e){},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.buses.map((function(e){return v.a.createElement(tt,{key:e.id,bus:e})})),n=this.props.tracks.map((function(t){return v.a.createElement(bt,{updateActiveTab:e.updateActiveTab.bind(e),key:t.id,track:t})}));return v.a.createElement("div",{className:Me.a.container},n,t)}}]),n}(v.a.Component),gt=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement(Ae,{sendBuses:Object(b.a)(this.props.engine.buses.keys()),transport:this.props.engine.transport,tracks:Object(b.a)(this.props.engine.tracks.values()),masterTrack:this.props.engine.masterTrack,sequencer:this.props.engine.sequencer}),v.a.createElement(kt,{buses:Object(b.a)(this.props.engine.buses.values()),tracks:Object(b.a)(this.props.engine.tracks.values()),audioEngine:this.props.engine}))}}]),n}(v.a.Component),yt=function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement("hr",null),"\xa9 ","Arjan Frans ".concat(function(){var e=(new Date).getFullYear();return 2020!==e?"".concat(2020,"-").concat(e):"".concat(e)}()," | "),v.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/arjanfrans/web-drum-machine"},"Source Code")," | ","web-drum-machine"," v","0.0.2")};h("Starting app: ".concat("web-drum-machine"));var Ot=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new ce(le),e.next=3,t.init();case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wt=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={engine:e.engine},i}return Object(i.a)(n,[{key:"start",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,Ot();case 3:e.t1=e.sent,e.t2={engine:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.engine?v.a.createElement(v.a.Fragment,null,v.a.createElement(gt,{engine:this.state.engine})):v.a.createElement("button",{onClick:this.start.bind(this)},"Click here to start!")}}]),n}(v.a.Component);Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.a.render(v.a.createElement(v.a.StrictMode,null,v.a.createElement(wt,null),v.a.createElement(yt,null)),document.getElementById("root"));case 1:case"end":return e.stop()}}),e)})))()}],[[41,1,2]]]);
//# sourceMappingURL=main.2b6b3e5d.chunk.js.map